<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.css" rel="stylesheet" />
		<script src="js/castapp.js"></script>
		<style>
			* { touch-action: none; } 
		</style>
	</head>
	<body>
		<!--敲击mtab即可生成底部栏的代码块-->
		<nav class="mui-bar mui-bar-tab">
		    <a class="mui-tab-item mui-active" data-href="Main.html">
		        <span class="mui-tab-label">首页</span>
		    </a>
		    <a class="mui-tab-item" data-href="Find.html">
		        <span class="mui-tab-label">发现</span>
		    </a>
		    <a class="mui-tab-item" data-href="Message.html">
		        <span class="mui-tab-label">消息</span>
		    </a>
		    <a class="mui-tab-item" data-href="MyM.html">
		        <span class="mui-tab-label">我的</span>
		    </a>
		</nav>
		<script src="js/mui.js"></script>
	</body>
	<script>
		mui.plusReady(function() {
		    var main = plus.webview.currentWebview();
		    var sub_pages = ["Main.html", "Find.html", "Message.html", "MyM.html"];
		    var sub_styles = {
		        top: "0px",
		        bottom: "50px"
		    };
		    for (var i = 0; i < sub_pages.length; i++) {
		        var sub = plus.webview.create(sub_pages[i], sub_pages[i], sub_styles);
		        if (i > 0) {
		            sub.hide();
		        }
		        main.append(sub);
		    }
		    var active_tab = sub_pages[0];
		    /*var title = document.querySelector(".mui-title");*/
		    var tabs = document.querySelectorAll(".mui-tab-item");
		    for (var j = 0; j < tabs.length; j++) {
		        tabs[j].addEventListener("tap", function() {
		            var target_tab = this.getAttribute("data-href");
		            if (active_tab == target_tab) 
					{
		                return;
		            }
		            /*title.innerText = this.querySelector(".mui-tab-label").innerText;*/
		            plus.webview.show(target_tab);
		            plus.webview.hide(active_tab);
		            active_tab = target_tab;
		        });
		    }
		});
	</script>
</html>
